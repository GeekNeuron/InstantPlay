/* assets/css/style.css */

:root {
    --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --border-radius-small: 4px;
    --border-radius-medium: 8px;
    --border-radius-large: 12px;
    --transition-speed: 0.25s;
    --page-wrapper-max-width: 550px;
    --grid-size-js: 15px; 
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: var(--font-main);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start; /* Changed to flex-start to allow scrolling if content overflows */
    min-height: 100vh;
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: background-color var(--transition-speed) ease-in-out, color var(--transition-speed) ease-in-out;
    padding: 10px;
    text-align: center;
    line-height: 1.6;
}

.page-wrapper {
    width: 100%;
    max-width: var(--page-wrapper-max-width);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-bottom: 20px; /* Space for footer if page-wrapper is main scroll area */
}

.settings-box {
    width: 100%;
    padding: 15px;
    margin-bottom: 15px; /* This margin might be removed if footer is inside */
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: var(--game-bg-color);
    border-radius: var(--border-radius-large);
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

h1.game-title-header { /* ... as before ... */ }
.controls-panel { /* ... as before ... */ }
.scores-group-left { /* ... as before ... */ }
.score-box { /* ... as before ... */ }
.settings-selectors-right { /* ... as before ... */ }
.control-group { /* ... as before ... */ }
.control-group select { /* ... as before ... */ }
.control-group select:focus { /* ... as before ... */ }

.game-container {
    padding: 0;
    border: none;
    box-shadow: none;
    background-color: transparent; /* Canvas background will be visible */
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 100%;
    margin-top: 10px; /* Added some space above game container within settings-box */
}

.game-header-combo { /* ... as before ... */ }
#combo-display { /* ... as before ... */ }

/* --- Critical: Canvas Styling for Visibility --- */
#gameCanvas {
    display: block; /* Essential for proper sizing and layout */
    /* JavaScript (board.js) sets the actual pixel width and height (canvas.width, canvas.height) */
    /* CSS width/height here controls the scaled display size of that bitmap. */
    /* Let's try to make its display width 100% of its direct parent (.game-container) */
    width: 100%; 
    /* Height should scale automatically to maintain aspect ratio if JS sets one. */
    /* If canvas is square (ROWS === COLS), and width is 100%, this makes it square: */
    /* aspect-ratio: 1 / 1; */ /* Modern CSS, good if supported and desired */
    /* Alternatively, remove CSS height and let JS height attribute + CSS width dictate size. */
    /* max-width: 100%; // Already implied by width: 100% if parent is constrained */
    max-height: 70vh; /* A fallback constraint to prevent extreme heights, adjust as needed */
    
    border-radius: 0 0 var(--border-radius-medium) var(--border-radius-medium);
    background-color: var(--canvas-bg-color); /* Fallback background, ensure this color is visible */
    border: 1px solid var(--border-color); /* Add a border to canvas itself to make its bounds clear */
}


.game-legend {
    width: 100%;
    margin-top: 15px;
    padding: 10px;
    /* border-top: 1px solid var(--border-color); // Separator line if desired */
    /* background-color: var(--canvas-bg-color); // Optional different background for legend */
    border-radius: var(--border-radius-medium); /* Make legend have its own rounded corners */
    text-align: center;
}
/* ... (other legend styles as before) ... */

/* Footer Styling - now inside settings-box */
footer {
    width: 100%; /* Take full width of settings-box */
    margin-top: 20px; /* Space above footer, inside settings-box */
    padding-top: 10px; /* Space from legend */
    border-top: 1px solid var(--border-color); /* Separator line above footer */
    font-size: 0.85rem;
    color: var(--text-color-muted);
    text-align: center;
}

/* Achievement Notification Popup (remains the same) */
/* ... */
/* Modal Styling (remains the same) */
/* ... */
/* Media Queries (remain the same, may need tuning after layout changes) */
/* ... */
@media (max-width: 540px) {
    .controls-panel {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
    }
    .scores-group-left, .settings-selectors-right {
        justify-content: space-around;
        width: 100%;
    }
    /* ... other media query adjustments ... */
}

@media (max-width: 400px) {
    h1.game-title-header { font-size: 1.8rem; }
    /* ... other media query adjustments ... */
    #gameCanvas {
         max-height: calc(70vh - 120px); /* Adjusted for smaller screens if header is taller */
    }
}
